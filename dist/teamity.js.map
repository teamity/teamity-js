{"version":3,"sources":["webpack://Teamity/webpack/universalModuleDefinition","webpack://Teamity/./index.js","webpack://Teamity/./node_modules/EventEmitter/src/index.js","webpack://Teamity/./symbols.js","webpack://Teamity/webpack/bootstrap","webpack://Teamity/webpack/runtime/define property getters","webpack://Teamity/webpack/runtime/hasOwnProperty shorthand","webpack://Teamity/webpack/runtime/make namespace object","webpack://Teamity/webpack/startup"],"names":["require","kTeamityRaw","kTeamityUrl","EventEmitter","WebSkt","window","WebSocket","pkgSplit","Teamity","url","$raw","readyState","OPEN","CLOSED","$connected","$url","onopen","bind","onerror","onclose","onmessage","_onMessage","event","body","encode","TextEncoder","Uint8Array","toString","JSON","stringify","split","pkgLen","byteLength","pkg","offset","set","send","close","Promise","resolve","reject","once","payload","emit","args","_toUint8Array","data","arrayBuffer","then","buffer","Error","msg","decode","TextDecoder","pkgIdx","findIndex","v","String","fromCharCode","topic","slice","length","superEmit","parse","e","module","exports","opts","Apply","Function","prototype","apply","privateMap","WeakMap","internal","obj","has","get","maxListeners","localConsole","console","self","_events","Set","_callbacks","_console","_maxListeners","parseInt","eventName","callback","context","weight","_getCallbacks","push","sort","a","b","_has","element","listenersNumber","callbackInd","_getCallbackIndex","activeCallback","TypeError","add","_achieveMaxListener","warn","_callbackIsExists","arguments","_addCallback","onceCallback","off","call","on","splice","forEach","clear","Symbol"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCVqCA,mBAAO,CAAC,+BAAD,C;IAApCC,W,YAAAA,W;IAAaC,W,YAAAA,W;;gBACaF,mBAAO,CAAC,8DAAD,C;IAAxBG,Y;;AAEjB,IAAMC,MAAM,GAAGC,MAAM,CAACC,SAAtB;AACA,IAAMC,QAAQ,GAAG,IAAjB;;IAEMC,O;;;;;AACJ,mBAAaC,GAAb,EAAkB;AAAA;;AAAA;;AAChB;AACA,UAAKP,WAAL,IAAoBO,GAApB;AAFgB;AAGjB;;;;SAED,eAAY;AACV,aAAO,KAAKP,WAAL,CAAP;AACD;;;SAED,eAAY;AACV,aAAO,KAAKD,WAAL,CAAP;AACD,K,CAED;;;;SACA,eAAkB;AAChB,aAAO,KAAKS,IAAL,IAAa,KAAKA,IAAL,CAAUC,UAAV,KAAyBP,MAAM,CAACQ,IAApD;AACD;;;SAED,eAAqB;AACnB,aAAO,KAAKF,IAAL,IAAa,KAAKA,IAAL,CAAUC,UAAV,KAAyBP,MAAM,CAACS,MAApD;AACD,K,CAED;;;;WACA,gBAAQ;AACN,UAAI,KAAKC,UAAT,EAAqB;AAErB,WAAKb,WAAL,IAAoB,IAAIG,MAAJ,CAAW,KAAKW,IAAhB,CAApB;AACA,WAAKL,IAAL,CAAUM,MAAV,GAAmB,uDAAWC,IAAX,CAAgB,IAAhB,EAAsB,SAAtB,CAAnB;AACA,WAAKP,IAAL,CAAUQ,OAAV,GAAoB,uDAAWD,IAAX,CAAgB,IAAhB,EAAsB,OAAtB,CAApB;AACA,WAAKP,IAAL,CAAUS,OAAV,GAAoB,uDAAWF,IAAX,CAAgB,IAAhB,EAAsB,YAAtB,CAApB;AACA,WAAKP,IAAL,CAAUU,SAAV,GAAsBC,UAAU,CAACJ,IAAX,CAAgB,IAAhB,CAAtB;AACD;;;WAED,cAAMK,KAAN,EAAaC,IAAb,EAAmB;AACjB,UAAMC,MAAM,GAAG,IAAIC,WAAJ,EAAf;;AACA,UAAI,EAAEH,KAAK,YAAYI,UAAnB,CAAJ,EAAoC;AAClC,YAAI,OAAOJ,KAAP,KAAiB,QAArB,EAA+B;AAC7BA,eAAK,GAAGA,KAAK,CAACK,QAAN,EAAR;AACD;;AAEDL,aAAK,GAAGE,MAAM,CAACA,MAAP,CAAcF,KAAd,CAAR;AACD;;AAED,UAAI,EAAEC,IAAI,YAAYG,UAAlB,CAAJ,EAAmC;AACjC,YAAI,OAAOH,IAAP,KAAgB,QAApB,EAA8B;AAC5BA,cAAI,GAAGK,IAAI,CAACC,SAAL,CAAeN,IAAf,CAAP;AACD;;AAEDA,YAAI,GAAGC,MAAM,CAACA,MAAP,CAAcD,IAAd,CAAP;AACD;;AAED,UAAMO,KAAK,GAAGN,MAAM,CAACA,MAAP,CAAcjB,QAAd,CAAd;AACA,UAAMwB,MAAM,GAAGT,KAAK,CAACU,UAAN,GAAmBF,KAAK,CAACE,UAAzB,GAAsCT,IAAI,CAACS,UAA1D;AACA,UAAMC,GAAG,GAAG,IAAIP,UAAJ,CAAeK,MAAf,CAAZ;AAEA,UAAIG,MAAM,GAAG,CAAb;AACAD,SAAG,CAACE,GAAJ,CAAQb,KAAR,EAAeY,MAAf;AACAA,YAAM,IAAIZ,KAAK,CAACU,UAAhB;AACAC,SAAG,CAACE,GAAJ,CAAQL,KAAR,EAAeI,MAAf;AACAA,YAAM,IAAIJ,KAAK,CAACE,UAAhB;AACAC,SAAG,CAACE,GAAJ,CAAQZ,IAAR,EAAcW,MAAd;AAEA,WAAKxB,IAAL,CAAU0B,IAAV,CAAeH,GAAf;AACD;;;WAED,iBAAS;AACP,WAAKvB,IAAL,CAAU2B,KAAV;AACD;;;WAED,iBAASf,KAAT,EAAgBC,IAAhB,EAAsB;AAAA;;AACpB,aAAO,IAAIe,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,cAAI,CAACC,IAAL,CAAUnB,KAAV,EAAiB,UAAAoB,OAAO,EAAI;AAC1BH,iBAAO,CAACG,OAAD,CAAP;AACD,SAFD;;AAGA,cAAI,CAACC,IAAL,CAAUrB,KAAV,EAAiBC,IAAjB;AACD,OALM,CAAP;AAMD;;;WAED,qBAAoB;AAAA;;AAAA,wCAANqB,IAAM;AAANA,YAAM;AAAA;;AAClB,uGAAcA,IAAd;AACD,K,CAED;AACA;AACA;AACA;;;;;EAtFoBzC,Y;;AAyFtB,SAAS0C,aAAT,CAAwBC,IAAxB,EAA8B;AAC5B,SAAO,IAAIR,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAIM,IAAI,CAACC,WAAT,EAAsB;AACpBD,UAAI,CAACC,WAAL,GAAmBC,IAAnB,CAAwB,UAAAC,MAAM,EAAI;AAChCV,eAAO,CAAC,IAAIb,UAAJ,CAAeuB,MAAf,CAAD,CAAP;AACD,OAFD;AAGD,KAJD,MAIO;AACLT,YAAM,CAAC,IAAIU,KAAJ,CAAU,mBAAV,CAAD,CAAN;AACD;AACF,GARM,CAAP;AASD;;AAED,SAAS7B,UAAT,CAAqB8B,GAArB,EAA0B;AAAA;;AACxB,MAAI;AAAA,QACML,IADN,GACeK,GADf,CACML,IADN;AAEF,QAAMM,MAAM,GAAG,IAAIC,WAAJ,EAAf;;AACAR,iBAAa,CAACC,IAAD,CAAb,CAAoBE,IAApB,CAAyB,UAAAN,OAAO,EAAI;AAClC,UAAMY,MAAM,GAAGZ,OAAO,CAACa,SAAR,CAAkB,UAAAC,CAAC,EAAI;AACpC,eAAOC,MAAM,CAACC,YAAP,CAAoBF,CAApB,MAA2BjD,QAAlC;AACD,OAFc,CAAf;;AAIA,UAAI+C,MAAM,GAAG,CAAb,EAAgB;AACd;AACD;;AAED,UAAMK,KAAK,GAAGjB,OAAO,CAACkB,KAAR,CAAc,CAAd,EAAiBN,MAAjB,CAAd;AACA,UAAM/B,IAAI,GAAGmB,OAAO,CAACkB,KAAR,CAAcN,MAAM,GAAG/C,QAAQ,CAACsD,MAAhC,CAAb;;AAEA,YAAI,CAACC,SAAL,CAAeV,MAAM,CAACA,MAAP,CAAcO,KAAd,CAAf,EAAqC/B,IAAI,CAACmC,KAAL,CAAWX,MAAM,CAACA,MAAP,CAAc7B,IAAd,CAAX,CAArC;AACD,KAbD;AAcD,GAjBD,CAiBE,OAAOyC,CAAP,EAAU,CAAE;AACf;;AAEDC,MAAM,CAACC,OAAP,GAAiB,UAAUC,IAAV,EAAgB;AAC/B,SAAO,IAAI3D,OAAJ,CAAY2D,IAAZ,CAAP;AACD,CAFD,C;;;;;;;;;;;;;;;AChIa;;;;;;;;AAEb,IAAMC,KAAK,GAAGC,QAAQ,CAACC,SAAT,CAAmBC,KAAjC;AACA,IAAMC,UAAU,GAAG,IAAIC,OAAJ,EAAnB,C,CAEA;;AACA,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,MAAI,CAACH,UAAU,CAACI,GAAX,CAAeD,GAAf,CAAL,EAA0B;AACxBH,cAAU,CAACrC,GAAX,CAAewC,GAAf,EAAoB,EAApB;AACD;;AAED,SAAOH,UAAU,CAACK,GAAX,CAAeF,GAAf,CAAP;AACD;AAED;;;IACqBxE,Y;AACnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,0BAAyD;AAAA,QAA7C2E,YAA6C,uEAA9B,IAA8B;AAAA,QAAxBC,YAAwB,uEAATC,OAAS;;AAAA;;AACvD,QAAMC,IAAI,GAAGP,QAAQ,CAAC,IAAD,CAArB;AAEAO,QAAI,CAACC,OAAL,GAAe,IAAIC,GAAJ,EAAf;AACAF,QAAI,CAACG,UAAL,GAAkB,EAAlB;AACAH,QAAI,CAACI,QAAL,GAAgBN,YAAhB;AACAE,QAAI,CAACK,aAAL,GAAqBR,YAAY,KAAK,IAAjB,GACnB,IADmB,GACZS,QAAQ,CAACT,YAAD,EAAe,EAAf,CADjB;AAGA,WAAO,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;WACE,sBAAaU,SAAb,EAAwBC,QAAxB,EAAkCC,OAAlC,EAA2CC,MAA3C,EAAmD;AACjD,WAAKC,aAAL,CAAmBJ,SAAnB,EACGK,IADH,CACQ;AACJJ,gBAAQ,EAARA,QADI;AAEJC,eAAO,EAAPA,OAFI;AAGJC,cAAM,EAANA;AAHI,OADR,EADiD,CAQjD;AACA;;;AACA,WAAKC,aAAL,CAAmBJ,SAAnB,EACGM,IADH,CACQ,UAACC,CAAD,EAAIC,CAAJ;AAAA,eAAUD,CAAC,CAACJ,MAAF,GAAWK,CAAC,CAACL,MAAvB;AAAA,OADR;;AAGA,aAAO,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;;WACE,uBAAcH,SAAd,EAAyB;AACvB,aAAOd,QAAQ,CAAC,IAAD,CAAR,CAAeU,UAAf,CAA0BI,SAA1B,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,2BAAkBA,SAAlB,EAA6BC,QAA7B,EAAuC;AACrC,aAAO,KAAKQ,IAAL,CAAUT,SAAV,IACL,KAAKI,aAAL,CAAmBJ,SAAnB,EACGjC,SADH,CACa,UAAC2C,OAAD;AAAA,eAAaA,OAAO,CAACT,QAAR,KAAqBA,QAAlC;AAAA,OADb,CADK,GAEsD,IAF7D;AAGD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;;WACE,6BAAoBD,SAApB,EAA+B;AAC7B,aAAQd,QAAQ,CAAC,IAAD,CAAR,CAAeY,aAAf,KAAiC,IAAjC,IACNZ,QAAQ,CAAC,IAAD,CAAR,CAAeY,aAAf,IAAgC,KAAKa,eAAL,CAAqBX,SAArB,CADlC;AAED;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,2BAAkBA,SAAlB,EAA6BC,QAA7B,EAAuCC,OAAvC,EAAgD;AAC9C,UAAMU,WAAW,GAAG,KAAKC,iBAAL,CAAuBb,SAAvB,EAAkCC,QAAlC,CAApB;;AACA,UAAMa,cAAc,GAAGF,WAAW,KAAK,CAAC,CAAjB,GACrB,KAAKR,aAAL,CAAmBJ,SAAnB,EAA8BY,WAA9B,CADqB,GACwB,KAAK,CADpD;AAGA,aAAQA,WAAW,KAAK,CAAC,CAAjB,IAAsBE,cAAtB,IACNA,cAAc,CAACZ,OAAf,KAA2BA,OAD7B;AAED;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;;WACE,cAAKF,SAAL,EAAgB;AACd,aAAOd,QAAQ,CAAC,IAAD,CAAR,CAAeQ,OAAf,CAAuBN,GAAvB,CAA2BY,SAA3B,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,YAAGA,SAAH,EAAcC,QAAd,EAAoD;AAAA,UAA5BC,OAA4B,uEAAlB,IAAkB;AAAA,UAAZC,MAAY,uEAAH,CAAG;;AAClD;AACA,UAAMV,IAAI,GAAGP,QAAQ,CAAC,IAAD,CAArB;;AAEA,UAAI,OAAOe,QAAP,KAAoB,UAAxB,EAAoC;AAClC,cAAM,IAAIc,SAAJ,WAAiBd,QAAjB,wBAAN;AACD,OANiD,CAQlD;AACA;;;AACA,UAAI,CAAC,KAAKQ,IAAL,CAAUT,SAAV,CAAL,EAA2B;AACzBP,YAAI,CAACC,OAAL,CAAasB,GAAb,CAAiBhB,SAAjB;;AACAP,YAAI,CAACG,UAAL,CAAgBI,SAAhB,IAA6B,EAA7B;AACD,OAHD,MAGO;AACL;AACA,YAAI,KAAKiB,mBAAL,CAAyBjB,SAAzB,CAAJ,EAAyC;AACvCP,cAAI,CAACI,QAAL,CAAcqB,IAAd,CAAmB,yBAAkBzB,IAAI,CAACK,aAAvB,gCACFE,SADE,mBAAnB;AAED,SALI,CAOL;;;AACA,YAAI,KAAKmB,iBAAL,aAA0BC,SAA1B,CAAJ,EAA0C;AACxC3B,cAAI,CAACI,QAAL,CAAcqB,IAAd,CAAmB,kBAAUlB,SAAV,8CACYC,QADZ,MAAnB;AAED;AACF;;AAED,WAAKoB,YAAL,aAAqBD,SAArB;;AAEA,aAAO,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,cAAKpB,SAAL,EAAgBC,QAAhB,EAAsD;AAAA;;AAAA,UAA5BC,OAA4B,uEAAlB,IAAkB;AAAA,UAAZC,MAAY,uEAAH,CAAG;;AACpD,UAAMmB,YAAY,GAAG,SAAfA,YAAe,GAAa;AAChC,aAAI,CAACC,GAAL,CAASvB,SAAT,EAAoBsB,YAApB;;AADgC,0CAATlE,IAAS;AAATA,cAAS;AAAA;;AAEhC,eAAOwB,KAAK,CAAC4C,IAAN,CAAWvB,QAAX,EAAqBC,OAArB,EAA8B9C,IAA9B,CAAP;AACD,OAHD;;AAKA,aAAO,KAAKqE,EAAL,CAAQzB,SAAR,EAAmBsB,YAAnB,EAAiCpB,OAAjC,EAA0CC,MAA1C,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,aAAIH,SAAJ,EAAgC;AAAA,UAAjBC,QAAiB,uEAAN,IAAM;AAC9B,UAAMR,IAAI,GAAGP,QAAQ,CAAC,IAAD,CAArB;AACA,UAAI0B,WAAJ;;AAEA,UAAI,KAAKH,IAAL,CAAUT,SAAV,CAAJ,EAA0B;AACxB,YAAIC,QAAQ,KAAK,IAAjB,EAAuB;AACrB;AACAR,cAAI,CAACC,OAAL,WAAoBM,SAApB,EAFqB,CAGrB;;;AACAP,cAAI,CAACG,UAAL,CAAgBI,SAAhB,IAA6B,IAA7B;AACD,SALD,MAKO;AACLY,qBAAW,GAAG,KAAKC,iBAAL,CAAuBb,SAAvB,EAAkCC,QAAlC,CAAd;;AAEA,cAAIW,WAAW,KAAK,CAAC,CAArB,EAAwB;AACtBnB,gBAAI,CAACG,UAAL,CAAgBI,SAAhB,EAA2B0B,MAA3B,CAAkCd,WAAlC,EAA+C,CAA/C,EADsB,CAEtB;;;AACA,iBAAKW,GAAL,aAAYH,SAAZ;AACD;AACF;AACF;;AAED,aAAO,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,cAAKpB,SAAL,EAAyB;AAAA,yCAAN5C,IAAM;AAANA,YAAM;AAAA;;AACvB,UAAI,KAAKqD,IAAL,CAAUT,SAAV,CAAJ,EAA0B;AACxB;AACA,aAAKI,aAAL,CAAmBJ,SAAnB,EACG2B,OADH,CACW,UAACjB,OAAD;AAAA,iBACP9B,KAAK,CAAC4C,IAAN,CAAWd,OAAO,CAACT,QAAnB,EAA6BS,OAAO,CAACR,OAArC,EAA8C9C,IAA9C,CADO;AAAA,SADX;AAID;;AAED,aAAO,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;;;;WACE,iBAAQ;AACN,UAAMqC,IAAI,GAAGP,QAAQ,CAAC,IAAD,CAArB;;AAEAO,UAAI,CAACC,OAAL,CAAakC,KAAb;;AACAnC,UAAI,CAACG,UAAL,GAAkB,EAAlB;AAEA,aAAO,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACE,yBAAgBI,SAAhB,EAA2B;AACzB,aAAO,KAAKS,IAAL,CAAUT,SAAV,IACL,KAAKI,aAAL,CAAmBJ,SAAnB,EAA8B3B,MADzB,GACkC,IADzC;AAED;;;;;;;;;;;;;;;;AC9QHI,MAAM,CAACC,OAAP,GAAiB;AACfjE,aAAW,EAAEoH,MAAM,CAAC,aAAD,CADJ;AAEfnH,aAAW,EAAEmH,MAAM,CAAC,aAAD;AAFJ,CAAjB,C;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;UCNA;UACA;UACA;UACA","file":"teamity.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Teamity\"] = factory();\n\telse\n\t\troot[\"Teamity\"] = factory();\n})(this, function() {\nreturn ","const { kTeamityRaw, kTeamityUrl } = require('./symbols')\r\nconst { default: EventEmitter } = require('EventEmitter')\r\n\r\nconst WebSkt = window.WebSocket\r\nconst pkgSplit = '\\n'\r\n\r\nclass Teamity extends EventEmitter {\r\n  constructor (url) {\r\n    super()\r\n    this[kTeamityUrl] = url\r\n  }\r\n\r\n  get $url () {\r\n    return this[kTeamityUrl]\r\n  }\r\n\r\n  get $raw () {\r\n    return this[kTeamityRaw]\r\n  }\r\n\r\n  // properties\r\n  get $connected () {\r\n    return this.$raw && this.$raw.readyState === WebSkt.OPEN\r\n  }\r\n\r\n  get $disconnected () {\r\n    return this.$raw && this.$raw.readyState === WebSkt.CLOSED\r\n  }\r\n\r\n  // methods\r\n  open () {\r\n    if (this.$connected) return\r\n\r\n    this[kTeamityRaw] = new WebSkt(this.$url)\r\n    this.$raw.onopen = super.emit.bind(this, 'connect')\r\n    this.$raw.onerror = super.emit.bind(this, 'error')\r\n    this.$raw.onclose = super.emit.bind(this, 'disconnect')\r\n    this.$raw.onmessage = _onMessage.bind(this)\r\n  }\r\n\r\n  emit (event, body) {\r\n    const encode = new TextEncoder()\r\n    if (!(event instanceof Uint8Array)) {\r\n      if (typeof event !== 'string') {\r\n        event = event.toString()\r\n      }\r\n\r\n      event = encode.encode(event)\r\n    }\r\n\r\n    if (!(body instanceof Uint8Array)) {\r\n      if (typeof body !== 'string') {\r\n        body = JSON.stringify(body)\r\n      }\r\n\r\n      body = encode.encode(body)\r\n    }\r\n\r\n    const split = encode.encode(pkgSplit)\r\n    const pkgLen = event.byteLength + split.byteLength + body.byteLength\r\n    const pkg = new Uint8Array(pkgLen)\r\n\r\n    let offset = 0\r\n    pkg.set(event, offset)\r\n    offset += event.byteLength\r\n    pkg.set(split, offset)\r\n    offset += split.byteLength\r\n    pkg.set(body, offset)\r\n\r\n    this.$raw.send(pkg)\r\n  }\r\n\r\n  close () {\r\n    this.$raw.close()\r\n  }\r\n\r\n  request (event, body) {\r\n    return new Promise((resolve, reject) => {\r\n      this.once(event, payload => {\r\n        resolve(payload)\r\n      })\r\n      this.emit(event, body)\r\n    })\r\n  }\r\n\r\n  superEmit (...args) {\r\n    super.emit(...args)\r\n  }\r\n\r\n  // events\r\n  // connect\r\n  // disconnect\r\n  // error\r\n}\r\n\r\nfunction _toUint8Array (data) {\r\n  return new Promise((resolve, reject) => {\r\n    if (data.arrayBuffer) {\r\n      data.arrayBuffer().then(buffer => {\r\n        resolve(new Uint8Array(buffer))\r\n      })\r\n    } else {\r\n      reject(new Error('data format error'))\r\n    }\r\n  })\r\n}\r\n\r\nfunction _onMessage (msg) {\r\n  try {\r\n    const { data } = msg\r\n    const decode = new TextDecoder()\r\n    _toUint8Array(data).then(payload => {\r\n      const pkgIdx = payload.findIndex(v => {\r\n        return String.fromCharCode(v) === pkgSplit\r\n      })\r\n\r\n      if (pkgIdx < 0) {\r\n        return\r\n      }\r\n\r\n      const topic = payload.slice(0, pkgIdx)\r\n      const body = payload.slice(pkgIdx + pkgSplit.length)\r\n\r\n      this.superEmit(decode.decode(topic), JSON.parse(decode.decode(body)))\r\n    })\r\n  } catch (e) {}\r\n}\r\n\r\nmodule.exports = function (opts) {\r\n  return new Teamity(opts)\r\n}\r\n","'use strict';\n\nconst Apply = Function.prototype.apply;\nconst privateMap = new WeakMap();\n\n// For making private properties.\nfunction internal(obj) {\n  if (!privateMap.has(obj)) {\n    privateMap.set(obj, {});\n  }\n\n  return privateMap.get(obj);\n}\n\n/** Class EventEmitter for event-driven architecture. */\nexport default class EventEmitter {\n  /**\n   * Constructor.\n   *\n   * @constructor\n   * @param {number|null} maxListeners.\n   * @param {object} localConsole.\n   *\n   * Set private initial parameters:\n   *   _events, _callbacks, _maxListeners, _console.\n   *\n   * @return {this}\n   */\n  constructor(maxListeners = null, localConsole = console) {\n    const self = internal(this);\n\n    self._events = new Set();\n    self._callbacks = {};\n    self._console = localConsole;\n    self._maxListeners = maxListeners === null ?\n      null : parseInt(maxListeners, 10);\n\n    return this;\n  }\n\n  /**\n   * Add callback to the event.\n   *\n   * @param {string} eventName.\n   * @param {function} callback\n   * @param {object|null} context - In than context will be called callback.\n   * @param {number} weight - Using for sorting callbacks calls.\n   *\n   * @return {this}\n   */\n  _addCallback(eventName, callback, context, weight) {\n    this._getCallbacks(eventName)\n      .push({\n        callback,\n        context,\n        weight\n      });\n\n    // Sort the array of callbacks in\n    // the order of their call by \"weight\".\n    this._getCallbacks(eventName)\n      .sort((a, b) => a.weight > b.weight);\n\n    return this;\n  }\n\n  /**\n   * Get all callback for the event.\n   *\n   * @param {string} eventName\n   *\n   * @return {object|undefined}\n   */\n  _getCallbacks(eventName) {\n    return internal(this)._callbacks[eventName];\n  }\n\n  /**\n   * Get callback's index for the event.\n   *\n   * @param {string} eventName\n   * @param {callback} callback\n   *\n   * @return {number|null}\n   */\n  _getCallbackIndex(eventName, callback) {\n    return this._has(eventName) ?\n      this._getCallbacks(eventName)\n        .findIndex((element) => element.callback === callback) : null;\n  }\n\n  /**\n   * Check if we achive maximum of listeners for the event.\n   *\n   * @param {string} eventName\n   *\n   * @return {bool}\n   */\n  _achieveMaxListener(eventName) {\n    return (internal(this)._maxListeners !== null &&\n      internal(this)._maxListeners <= this.listenersNumber(eventName));\n  }\n\n  /**\n   * Check if callback is already exists for the event.\n   *\n   * @param {string} eventName\n   * @param {function} callback\n   * @param {object|null} context - In than context will be called callback.\n   *\n   * @return {bool}\n   */\n  _callbackIsExists(eventName, callback, context) {\n    const callbackInd = this._getCallbackIndex(eventName, callback);\n    const activeCallback = callbackInd !== -1 ?\n      this._getCallbacks(eventName)[callbackInd] : void 0;\n\n    return (callbackInd !== -1 && activeCallback &&\n      activeCallback.context === context);\n  }\n\n  /**\n   * Check is the event was already added.\n   *\n   * @param {string} eventName\n   *\n   * @return {bool}\n   */\n  _has(eventName) {\n    return internal(this)._events.has(eventName);\n  }\n\n  /**\n   * Add the listener.\n   *\n   * @param {string} eventName\n   * @param {function} callback\n   * @param {object|null} context - In than context will be called callback.\n   * @param {number} weight - Using for sorting callbacks calls.\n   *\n   * @return {this}\n   */\n  on(eventName, callback, context = null, weight = 1) {\n    /* eslint no-unused-vars: 0 */\n    const self = internal(this);\n\n    if (typeof callback !== 'function') {\n      throw new TypeError(`${callback} is not a function`);\n    }\n\n    // If event wasn't added before - just add it\n    // and define callbacks as an empty object.\n    if (!this._has(eventName)) {\n      self._events.add(eventName);\n      self._callbacks[eventName] = [];\n    } else {\n      // Check if we reached maximum number of listeners.\n      if (this._achieveMaxListener(eventName)) {\n        self._console.warn(`Max listeners (${self._maxListeners})` +\n          ` for event \"${eventName}\" is reached!`);\n      }\n\n      // Check if the same callback has already added.\n      if (this._callbackIsExists(...arguments)) {\n        self._console.warn(`Event \"${eventName}\"` +\n          ` already has the callback ${callback}.`);\n      }\n    }\n\n    this._addCallback(...arguments);\n\n    return this;\n  }\n\n  /**\n   * Add the listener which will be executed only once.\n   *\n   * @param {string} eventName\n   * @param {function} callback\n   * @param {object|null} context - In than context will be called callback.\n   * @param {number} weight - Using for sorting callbacks calls.\n   *\n   * @return {this}\n   */\n  once(eventName, callback, context = null, weight = 1) {\n    const onceCallback = (...args) => {\n      this.off(eventName, onceCallback);\n      return Apply.call(callback, context, args);\n    };\n\n    return this.on(eventName, onceCallback, context, weight);\n  }\n\n  /**\n   * Remove an event at all or just remove selected callback from the event.\n   *\n   * @param {string} eventName\n   * @param {function} callback\n   *\n   * @return {this}\n   */\n  off(eventName, callback = null) {\n    const self = internal(this);\n    let callbackInd;\n\n    if (this._has(eventName)) {\n      if (callback === null) {\n        // Remove the event.\n        self._events.delete(eventName);\n        // Remove all listeners.\n        self._callbacks[eventName] = null;\n      } else {\n        callbackInd = this._getCallbackIndex(eventName, callback);\n\n        if (callbackInd !== -1) {\n          self._callbacks[eventName].splice(callbackInd, 1);\n          // Remove all equal callbacks.\n          this.off(...arguments);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Trigger the event.\n   *\n   * @param {string} eventName\n   * @param {...args} args - All arguments which should be passed into callbacks.\n   *\n   * @return {this}\n   */\n  emit(eventName, ...args) {\n    if (this._has(eventName)) {\n      // All callbacks will be triggered sorter by \"weight\" parameter.\n      this._getCallbacks(eventName)\n        .forEach((element) =>\n          Apply.call(element.callback, element.context, args)\n        );\n    }\n\n    return this;\n  }\n\n  /**\n   * Clear all events and callback links.\n   *\n   * @return {this}\n   */\n  clear() {\n    const self = internal(this);\n\n    self._events.clear();\n    self._callbacks = {};\n\n    return this;\n  }\n\n  /**\n   * Returns number of listeners for the event.\n   *\n   * @param {string} eventName\n   *\n   * @return {number|null} - Number of listeners for event\n   *                         or null if event isn't exists.\n   */\n  listenersNumber(eventName) {\n    return this._has(eventName) ?\n      this._getCallbacks(eventName).length : null;\n  }\n}\n","module.exports = {\r\n  kTeamityRaw: Symbol('teamity.raw'),\r\n  kTeamityUrl: Symbol('teamity.url')\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./index.js\");\n"],"sourceRoot":""}